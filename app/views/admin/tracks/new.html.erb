<%= javascript_include_tag 'jquery.uploadProgress' %>
<script type="text/javascript" charset="utf-8">
  $(function() {
      $('form').uploadProgress({
      /* scripts locations for safari */
      jqueryPath: "/javascripts/jquery-1.3.2.min.js",
      uploadProgressPath: "/javascripts/jquery.uploadProgress.js",
      /* function called each time bar is updated */
      uploading: function(upload) {$('#percents').html(upload.percents+'%');},
      /* selector or element that will be updated */
      progressBar: "#progressbar",
      /* progress reports url */
      progressUrl: "/progress",
      /* how often the bar will be updated */
      interval: 1000
      });
  });
</script>

<div id="main" class="grid_12">
  
  <div id="uploading">
    <div id="progress" class="bar">
      <div id="progressbar">&nbsp;</div>
      <div id="percents"></div>
    </div>
  </div>
  
  <h1>Nieuwe track</h1>
  
  <% form_for([:admin, @track], :html => { :multipart => true }) do |f| %>

    <ul>
      <%= f.error_messages %>
      <li><%= f.label :artist %>
      <%= select("track", "artist_id", @artist.collect {|a| [ a.name, a.id ] }, { :include_blank => true })
       %></li>
      <li><%= f.label :mp3 %>
      <%= f.file_field :mp3 %></li>
      <li><%= f.label :name %>
      <%= f.text_field :name, :class => "text", :size => "30" %></li>
      <li><%= f.label :description %>
      <%= f.text_area :description, :class => "text", :cols => "40", :rows => "15" %></li>
      <li><%= f.submit "Submit" %></li>
    </ul>
  <% end %>
  
</div>

<style type="text/css" media="screen">
  .bar {
    width: 300px;
  }
  
  #progress {
    background: #eee;
    border: 1px solid #222;
    margin-top: 20px;
  }
  #progressbar {
    width: 0px;
    height: 24px;
    background: #333;
  }
</style>

